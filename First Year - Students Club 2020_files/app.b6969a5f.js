(function(e){function t(t){for(var i,r,s=t[0],u=t[1],c=t[2],f=0,l=[];f<s.length;f++)r=s[f],o[r]&&l.push(o[r][0]),o[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(e[i]=u[i]);d&&d(t);while(l.length)l.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var i={},o={app:0},a=[];function r(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.isInvalid?[n("h1",[e._v("Hello world!!!")])]:[n("facebook-iframe")]],2)},a=[],r=(n("96cf"),n("3b8d")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.renderComplete,expression:"renderComplete"}],staticClass:"fb-customerchat",attrs:{id:"beeketing-messenger-chat-plugin",page_id:e.config.pageId,theme_color:e.config.themeColor,logged_in_greeting:e.config.loggedInGreeting,logged_out_greeting:e.config.loggedOutGreeting}})},u=[],c=(n("386d"),n("cebc")),d=n("1157"),f=n.n(d),l=n("2f62"),p=n("72c2"),h=n("f499"),g=n.n(h),m={isEnable:function(){if(window.parent)return window.parent.location.hash.search("dev")>=0},info:function(){if(this.isEnable()){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.info(t)}}},v={post:function(e){if(window.parent){m.info("Dispatch message to parent",e),e.wrapper_iframe_id=window.wrapper_iframe_id;var t=g()(e);window.parent.postMessage("beeketing-iframe-message:".concat(t),"*")}}},b=(n("ac6a"),n("28a5"),n("0b16")),w=n.n(b),C={isListened:!1,typeListeners:{},subscribeLiveChatEvent:function(e,t){this.listenMessageEvent(),this.addEventListeners(e,t)},addEventListeners:function(e,t){t&&"function"===typeof t&&(this.typeListeners[e]?this.typeListeners[e].push(t):this.typeListeners[e]=[t])},getChannelId:function(){var e=f()("#fb_xdm_frame_https");if(e.length){var t=new w.a.Url;return t.parse(e.get(0).src),t.hash.split("#channel=")[1].split("&")[0]}m.info("Cannot get facebook iframe cross domain")},listenMessageEvent:function(){var e=this;if(!this.isListened){var t=this.getChannelId();t&&(f()(window).on("message",function(n){if(n.originalEvent.data&&"string"===typeof n.originalEvent.data){var i=n.originalEvent.data.split(t);if(!(i.length<2)){var o={};i[1].split("&").forEach(function(e){var t=e.split("=");2===t.length&&("true"!==t[1]&&"false"!==t[1]||(t[1]="true"===t[1]),o[t[0]]=t[1])}),m.info("Facebook Event: ",o),o.type&&e.typeListeners[o.type]&&e.typeListeners[o.type].length&&e.typeListeners[o.type].forEach(function(e){return e(o)})}}}),this.isListened=!0)}}},y={name:"FacebookIframe",computed:Object(c["a"])({},Object(l["b"])({config:"config",renderComplete:"isChatPluginRenderComplete",isMobileMode:"isMobileMode"})),created:function(){var e,t=this;this.initFacebookSDK(),this.waitUntil(5,100,function(){var n=t.getCustomerChatIframe();return!!n&&(e=setTimeout(function(){t.notifyWidgetRenderFailed()},5e3),!0)}).onTimeout(function(){t.getCustomerChatIframe()||t.notifyWidgetRenderFailed()}),f()(window).on("message",function(n){"string"===typeof n.originalEvent.data&&(n.originalEvent.data.search("logged_in=true")>=0&&t.$store.commit("updateLoginStatus",!0),n.originalEvent.data.search("xd_action=plugin_ready")>=0&&clearTimeout(e))})},methods:{notifyWidgetRenderFailed:function(){this.$store.commit("updateMobileMode",p["a"].mobile()||p["a"].tablet()),v.post({notify_type:"widget_render_failed"})},initFacebookSDK:function(){var e=this,t=this.config.locate||"en_US";f.a.getScript("https://connect.facebook.net/".concat(t,"/sdk/xfbml.customerchat.js"),function(){window.FB.init({autoLogAppEvents:!0,xfbml:!0,version:"v3.2"}),e.reRenderWidget(),e.watchCustomerLiveChatEvent()})},reRenderWidget:function(){var e=this;window.FB.Event.subscribe("customerchat.dialogShow",function(){e.notifyWidgetSizeChange(),e.renderComplete||e.$store.commit("updateChatPluginRenderStatus"),v.post({notify_type:"widget_show"})})},getCustomerChatIframe:function(){var e=f()('iframe[src*="customerchat.php"]');if(e.length)return e},notifyWidgetSizeChange:function(){var e=this.getCustomerChatIframe();e&&this.waitUntil(30,100,function(){var t=e.width(),n=e.height();if(t>10||n>10)return v.post({notify_type:"resize",width:"".concat(t,"px"),height:"".concat(n,"px")}),!0})},watchCustomerLiveChatEvent:function(){var e=this;window.FB.Event.subscribe("customerchat.load",function(){C.subscribeLiveChatEvent("liveChatPluginPrepareAnchorIframe",function(t){e.$store.commit("updateMobileMode",t.isMobile||!1),e.$store.commit("updateChatStartedStatus",t.chatStarted||!1)}),C.subscribeLiveChatEvent("liveChatPluginShowBubbleIframe",function(e){e.dialogHidden&&window.FB.CustomerChat.showDialog()}),C.subscribeLiveChatEvent("liveChatPluginHideDialogIframe",function(){v.post({notify_type:"hide_widget"})}),C.subscribeLiveChatEvent("liveChatPluginShowInterstitialOnPage",function(){v.post({notify_type:"open_chat"})}),C.subscribeLiveChatEvent("liveChatPluginExpandDialogIframe",function(){e.$store.commit("updateChatStartedStatus",!0),v.post({notify_type:"resize",width:"403px",height:"1000px"}),setTimeout(e.notifyWidgetSizeChange,300)}),C.subscribeLiveChatEvent("liveChatPluginResizeAnchorIframe",function(){setTimeout(e.notifyWidgetSizeChange,300)})})},waitUntil:function(e,t,n){var i,o,a;return i=setInterval(function(){n()&&(clearInterval(i),clearTimeout(o))},t),o=setTimeout(function(){a&&a(),clearInterval(i)},1e3*e),{onTimeout:function(e){a=e}}}}},_=y,S=(n("cb2d"),n("2877")),I=Object(S["a"])(_,s,u,!1,null,null,null);I.options.__file="FacebookIframe.vue";var E=I.exports,L={name:"app",components:{facebookIframe:E},computed:{isInvalid:function(){return!this.$store.state.config.pageId}},created:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("initConfig");case 2:this.watchStateChange();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{watchStateChange:function(){this.$store.subscribe(function(e,t){"updateMobileMode"===e.type&&t.isMobileMode&&v.post({notify_type:"is_mobile"}),"updateLoginStatus"===e.type&&t.isLoggedIn&&v.post({notify_type:"user_logged_in"}),"updateChatPluginRenderStatus"===e.type&&t.isChatPluginRenderComplete&&v.post({notify_type:"widget_render_complete"}),"updateChatStartedStatus"===e.type&&t.isChatStarted&&(v.post({notify_type:"resize",width:"403px",height:"1000px"}),v.post({notify_type:"chat_started"}))})}}},M=L,x=Object(S["a"])(M,o,a,!1,null,null,null);x.options.__file="App.vue";var P=x.exports;i["a"].use(l["a"]);var O=new l["a"].Store({state:{config:{},isChatPluginRenderComplete:!1,isMobileMode:!1,isLoggedIn:!1,isChatStarted:!1},mutations:{updateConfig:function(e,t){e.config=t},updateChatPluginRenderStatus:function(e){e.isChatPluginRenderComplete=!0},updateMobileMode:function(e,t){e.isMobileMode=t},updateLoginStatus:function(e,t){e.isLoggedIn=t},updateChatStartedStatus:function(e,t){e.isChatStarted=t}},actions:{initConfig:function(e){var t=e.commit;t("updateConfig",{pageId:window.pageId,themeColor:window.themeColor,loggedInGreeting:window.loggedInGreeting,loggedOutGreeting:window.loggedOutGreeting,locate:window.locate,enableDefaultIcon:window.enableDefaultIcon,positionIcon:window.positionIcon})}}});i["a"].config.productionTip=!1,new i["a"]({store:O,render:function(e){return e(P)}}).$mount("#app")},cb2d:function(e,t,n){"use strict";var i=n("d151"),o=n.n(i);o.a},d151:function(e,t,n){}});